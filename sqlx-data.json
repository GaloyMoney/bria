{
  "db": "PostgreSQL",
  "03a7f3a2c86a0415f054e409f30fb66c58bb9b15d48c2e46fd4a050c5e20ff76": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Varchar",
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "UPDATE bria_addresses\n               SET external_id = $1\n               WHERE account_id = $2 AND address = $3"
  },
  "07dfe35dc6e9ce9c7435aa03ba6a346ce4ced6f651af14b35bc470d17144b93f": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Varchar"
        ]
      }
    },
    "query": "INSERT INTO bria_wallets (id, account_id, name) VALUES ($1, $2, $3) RETURNING (id)"
  },
  "0c64e1327d490c9c9d9b14f4f940460b0b7911c53c6446e60555b5946312eb00": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Varchar",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "keychainkind"
            }
          },
          "Varchar"
        ]
      }
    },
    "query": "INSERT INTO bria_addresses\n               (id, account_id, wallet_id, keychain_id, profile_id, address, kind, external_id)\n               VALUES ($1, $2, $3, $4, $5, $6, $7, $8) ON CONFLICT DO NOTHING"
  },
  "0c868d62166b7dff5ca4cfea668dac316185bbc80f77a98b2dbd9c27c91417fd": {
    "describe": {
      "columns": [
        {
          "name": "batch_id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Bytea"
        ]
      }
    },
    "query": "\n          SELECT batch_id\n          FROM bria_signing_sessions\n          WHERE account_id = $1 AND xpub_fingerprint = $2 FOR UPDATE"
  },
  "0df89733760b53d2ed8d3cc33e4f8d30e6ab6103822cab2a34d55e0dd187da41": {
    "describe": {
      "columns": [
        {
          "name": "tx_id",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "details_json",
          "ordinal": 1,
          "type_info": "Jsonb"
        },
        {
          "name": "utxo_json",
          "ordinal": 2,
          "type_info": "Jsonb"
        },
        {
          "name": "path",
          "ordinal": 3,
          "type_info": "Int4"
        },
        {
          "name": "vout",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "is_tx_output!",
          "ordinal": 5,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        null
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "TextArray"
        ]
      }
    },
    "query": "WITH tx_to_sync AS (\n           SELECT tx_id, details_json, height\n           FROM bdk_transactions\n           WHERE keychain_id = $1 AND synced_to_bria = false AND tx_id != ALL($2) AND deleted_at IS NULL\n           ORDER BY height ASC NULLS LAST\n           LIMIT 1\n           ),\n           previous_outputs AS (\n               SELECT (jsonb_array_elements(details_json->'transaction'->'input')->>'previous_output') AS output\n               FROM tx_to_sync\n           )\n           SELECT t.tx_id, details_json, utxo_json, path, vout,\n                  CASE WHEN u.tx_id = t.tx_id THEN true ELSE false END AS \"is_tx_output!\"\n           FROM bdk_utxos u\n           JOIN tx_to_sync t ON u.tx_id = t.tx_id OR CONCAT(u.tx_id, ':', u.vout::text) = ANY(\n               SELECT output FROM previous_outputs\n           ) OR u.tx_id = t.tx_id\n           JOIN bdk_script_pubkeys p\n           ON p.keychain_id = $1 AND u.utxo_json->'txout'->>'script_pubkey' = p.script_hex\n           WHERE u.keychain_id = $1 AND u.deleted_at IS NULL AND (u.synced_to_bria = false OR u.tx_id != t.tx_id)\n        "
  },
  "1be0a2be7e693ad095d6d3593686022d1a4d3823bacbc38c845f7898f3adb76b": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "UPDATE bria_batch_wallet_summaries\n               SET batch_broadcast_ledger_tx_id = $1\n               WHERE bria_batch_wallet_summaries.batch_id = $2\n                 AND bria_batch_wallet_summaries.wallet_id = $3"
  },
  "1c966653b607ef9cd8a305aac131cf64a17ab0803fdc55db8b55a14fced7178d": {
    "describe": {
      "columns": [
        {
          "name": "details_json",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n        SELECT details_json FROM bdk_transactions WHERE keychain_id = $1 AND deleted_at IS NULL"
  },
  "1e4d8b2841a5854fb6c8d01b0c7826a0b7c7348bf6141a736eeac25bf563c82b": {
    "describe": {
      "columns": [
        {
          "name": "account_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_id",
          "ordinal": 1,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT DISTINCT account_id, id as wallet_id FROM bria_wallets"
  },
  "2007c8cee0c1f518fc56c7c465b77b0251220a30d28eff95089f68091cb92326": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 3,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 5,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_payout_queues b\n              JOIN bria_payout_queue_events e ON b.id = e.id\n              ORDER BY b.id, e.sequence"
  },
  "21ea4761928aec144a72c1ced9baadc31fa57b51b94766af188b7ae448eb994f": {
    "describe": {
      "columns": [
        {
          "name": "sequence",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "event_type",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "event",
          "ordinal": 2,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT sequence, event_type, event FROM bria_xpub_events\n               WHERE id = $1\n               ORDER BY sequence"
  },
  "261d72b26bef231847a2a3ef8430cdaec087a4ce1ac98291b67704415436d4d7": {
    "describe": {
      "columns": [
        {
          "name": "payout_queue_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "unsigned_psbt",
          "ordinal": 1,
          "type_info": "Bytea"
        },
        {
          "name": "signed_tx",
          "ordinal": 2,
          "type_info": "Bytea"
        },
        {
          "name": "bitcoin_tx_id",
          "ordinal": 3,
          "type_info": "Bytea"
        },
        {
          "name": "batch_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_id",
          "ordinal": 5,
          "type_info": "Uuid"
        },
        {
          "name": "current_keychain_id",
          "ordinal": 6,
          "type_info": "Uuid"
        },
        {
          "name": "signing_keychains",
          "ordinal": 7,
          "type_info": "UuidArray"
        },
        {
          "name": "total_in_sats",
          "ordinal": 8,
          "type_info": "Int8"
        },
        {
          "name": "total_spent_sats",
          "ordinal": 9,
          "type_info": "Int8"
        },
        {
          "name": "change_sats",
          "ordinal": 10,
          "type_info": "Int8"
        },
        {
          "name": "change_address",
          "ordinal": 11,
          "type_info": "Varchar"
        },
        {
          "name": "change_vout",
          "ordinal": 12,
          "type_info": "Int4"
        },
        {
          "name": "fee_sats",
          "ordinal": 13,
          "type_info": "Int8"
        },
        {
          "name": "batch_created_ledger_tx_id",
          "ordinal": 14,
          "type_info": "Uuid"
        },
        {
          "name": "batch_broadcast_ledger_tx_id",
          "ordinal": 15,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false,
        false,
        true,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        true,
        true,
        false,
        true,
        true
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "SELECT payout_queue_id, unsigned_psbt, signed_tx, bitcoin_tx_id, s.batch_id, s.wallet_id, s.current_keychain_id, s.signing_keychains, total_in_sats, total_spent_sats, change_sats, change_address, change_vout, fee_sats, batch_created_ledger_tx_id, batch_broadcast_ledger_tx_id\n            FROM bria_batch_wallet_summaries s\n            LEFT JOIN bria_batches b ON b.id = s.batch_id\n            WHERE s.batch_id = $1 AND b.account_id = $2"
  },
  "277091eb889c9bfe2dac75ef4f634ff9a22328710da5608e39c79d2f212d1995": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Int4"
        ]
      }
    },
    "query": "UPDATE bdk_utxos SET synced_to_bria = true, modified_at = NOW()\n            WHERE keychain_id = $1 AND tx_id = $2 AND vout = $3"
  },
  "2a2a466dcd777aee7313718c83ddd2dfbbf1af9320d4eb002816a63a093c0c55": {
    "describe": {
      "columns": [
        {
          "name": "average!",
          "ordinal": 0,
          "type_info": "Numeric"
        }
      ],
      "nullable": [
        null
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "\n            SELECT COALESCE(ROUND(AVG(counts)), 1) AS \"average!\"\n            FROM (\n                SELECT COUNT(*) AS counts\n                FROM bria_utxos\n                WHERE wallet_id = $1 AND spending_payout_queue_id = $2 AND spending_batch_id IS NOT NULL\n                GROUP BY wallet_id, spending_batch_id\n            ) as subquery\n        "
  },
  "2c5e7765d15a8b3893f40a98898cca618f69ae9b16abeeb1dfe37fd8e3408f13": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 3,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 5,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_wallets b\n              JOIN bria_wallet_events e ON b.id = e.id\n              WHERE account_id = $1 AND name = $2\n              ORDER BY e.sequence"
  },
  "2df08a4dda76a8b38c54ad2ffd0c508127ca527d1496421146d798ea360d81b7": {
    "describe": {
      "columns": [
        {
          "name": "cypher",
          "ordinal": 0,
          "type_info": "Bytea"
        },
        {
          "name": "nonce",
          "ordinal": 1,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n            SELECT cypher, nonce\n            FROM bria_xpub_signer_configs\n            WHERE id = $1\n            "
  },
  "2ef3dc26b44ca0f6fb5bd698f7eb963ca41a1c7fb9ca50bef007492dc62d6891": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "SELECT id FROM bria_xpubs WHERE account_id = $1 AND name = $2"
  },
  "2f33cf38b3fa8b9f49c372599ddb2dc1e5b972610a39990c86b9b906ce0159ec": {
    "describe": {
      "columns": [
        {
          "name": "index",
          "ordinal": 0,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          }
        ]
      }
    },
    "query": "\n              INSERT INTO bdk_indexes (keychain_id, keychain_kind)\n              VALUES ($1, $2)\n              ON CONFLICT (keychain_id, keychain_kind)\n              DO UPDATE SET index = bdk_indexes.index + 1, modified_at = NOW()\n              WHERE bdk_indexes.keychain_id = $1 AND bdk_indexes.keychain_kind = $2\n              RETURNING index;\n              "
  },
  "323bf243d28db3a7f6810a2e640a8339e41793a7982e9ed6dc7175570f1d921d": {
    "describe": {
      "columns": [
        {
          "name": "script_bytes",
          "ordinal": 0,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          }
        ]
      }
    },
    "query": "SELECT script_bytes\n            FROM bdk_descriptor_checksums WHERE keychain_id = $1 AND keychain_kind = $2"
  },
  "33f57f36f6b74edf377c88894774f48d21919411b57c79120267ea7d0294b7ac": {
    "describe": {
      "columns": [
        {
          "name": "account_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "sequence!: EventSequence",
          "ordinal": 1,
          "type_info": "Int8"
        },
        {
          "name": "ledger_event_id: SqlxLedgerEventId",
          "ordinal": 2,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false,
        null,
        null
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "\n            SELECT account_id, MAX(sequence) AS \"sequence!: EventSequence\", MAX(ledger_event_id) AS \"ledger_event_id: SqlxLedgerEventId\"\n            FROM bria_outbox_events\n            GROUP BY account_id\n            "
  },
  "34dec721ee5f61bc0dc86a71d6fab7d7c8417180ae7c16440ba24fb80804509f": {
    "describe": {
      "columns": [
        {
          "name": "keychain_kind: BdkKeychainKind",
          "ordinal": 0,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          }
        },
        {
          "name": "path",
          "ordinal": 1,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Bytea"
        ]
      }
    },
    "query": "SELECT keychain_kind as \"keychain_kind: BdkKeychainKind\", path FROM bdk_script_pubkeys\n            WHERE keychain_id = $1 AND script_hex = ENCODE($2, 'hex')"
  },
  "38ee995cafdc4c4cd1319682e059e9b3b96a10251e0c78656353757f6b965a8c": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Bytea",
          "Bytea"
        ]
      }
    },
    "query": "\n                INSERT INTO bria_xpub_signer_configs (id, cypher, nonce, created_at, modified_at)\n                VALUES ($1, $2, $3, NOW(), NOW())\n                ON CONFLICT (id) DO UPDATE \n                SET cypher = $2, nonce = $3, modified_at = NOW()\n                "
  },
  "3fca5e81c350c9848aa07300603886d2dbdbbf6c987e8cea695af04813c056f0": {
    "describe": {
      "columns": [
        {
          "name": "wallet_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "keychain_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "tx_id",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "vout",
          "ordinal": 3,
          "type_info": "Int4"
        },
        {
          "name": "kind: pg::PgKeychainKind",
          "ordinal": 4,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "keychainkind"
            }
          }
        },
        {
          "name": "address_idx",
          "ordinal": 5,
          "type_info": "Int4"
        },
        {
          "name": "value",
          "ordinal": 6,
          "type_info": "Numeric"
        },
        {
          "name": "address",
          "ordinal": 7,
          "type_info": "Varchar"
        },
        {
          "name": "bdk_spent",
          "ordinal": 8,
          "type_info": "Bool"
        },
        {
          "name": "optional_address",
          "ordinal": 9,
          "type_info": "Varchar"
        },
        {
          "name": "block_height",
          "ordinal": 10,
          "type_info": "Int4"
        },
        {
          "name": "income_detected_ledger_tx_id",
          "ordinal": 11,
          "type_info": "Uuid"
        },
        {
          "name": "income_settled_ledger_tx_id",
          "ordinal": 12,
          "type_info": "Uuid"
        },
        {
          "name": "spending_batch_id",
          "ordinal": 13,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        null,
        true,
        false,
        true,
        true
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      }
    },
    "query": "SELECT wallet_id, keychain_id, tx_id, vout, kind as \"kind: pg::PgKeychainKind\", address_idx, value, address, bdk_spent,\n                  CASE\n                      WHEN kind = 'external' THEN address\n                      ELSE NULL\n                  END as optional_address,\n                  block_height, income_detected_ledger_tx_id, income_settled_ledger_tx_id, spending_batch_id\n           FROM bria_utxos\n           WHERE keychain_id = ANY($1) AND bdk_spent = false\n           ORDER BY created_at DESC"
  },
  "4077d342c7a9bbbe5441301ce1841c6c152f629a8eed79c111e3c2b5fcef1c67": {
    "describe": {
      "columns": [
        {
          "name": "keychain_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "income_address",
          "ordinal": 1,
          "type_info": "Bool"
        },
        {
          "name": "tx_id",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "vout",
          "ordinal": 3,
          "type_info": "Int4"
        },
        {
          "name": "spending_batch_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "income_settled_ledger_tx_id",
          "ordinal": 5,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false,
        null,
        false,
        false,
        true,
        true
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      }
    },
    "query": "SELECT keychain_id,\n               CASE WHEN kind = 'external' THEN true ELSE false END as income_address,\n               tx_id, vout, spending_batch_id, income_settled_ledger_tx_id\n               FROM bria_utxos\n               WHERE keychain_id = ANY($1) AND bdk_spent = false\n               FOR UPDATE"
  },
  "431e9fcdf2f16e554ab6da696c0ad807bbc296b96d3d8bceb1e2826786e949da": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT id, name FROM bria_accounts"
  },
  "45ae4f218ab3a64c547f6b93d06003de96f1d2136f44e6936e450463ecde0fc1": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Int4"
        ]
      }
    },
    "query": "UPDATE bdk_utxos SET confirmation_synced_to_bria = true, modified_at = NOW()\n            WHERE keychain_id = $1 AND tx_id = $2 AND vout = $3"
  },
  "47a3f8720e627c0bf3226c2849e992adada2b846e72271ad815685db188339fa": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Uuid",
          "Varchar",
          "Int4",
          "Float4",
          "Bool",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "keychainkind"
            }
          },
          "Int4",
          "Numeric",
          "Varchar",
          "Varchar",
          "Uuid",
          "Bool"
        ]
      }
    },
    "query": "INSERT INTO bria_utxos\n               (account_id, wallet_id, keychain_id, tx_id, vout, sats_per_vbyte_when_created, self_pay, kind, address_idx, value, address, script_hex, income_detected_ledger_tx_id, bdk_spent)\n               VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14)\n               ON CONFLICT (keychain_id, tx_id, vout) DO NOTHING"
  },
  "49f0ec838df5bd54f5c9e315317e7b34d191296fcdc7534670e4539713032b20": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "UuidArray"
        ]
      }
    },
    "query": "UPDATE bria_payouts SET batch_id = $1 WHERE id = ANY($2)"
  },
  "5256bb536a5c8b3421a642b8e4eb005975efe12df569e823b49bbd7b2688d52b": {
    "describe": {
      "columns": [
        {
          "name": "details_json",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "\n        SELECT details_json FROM bdk_transactions WHERE keychain_id = $1 AND tx_id = $2 AND deleted_at IS NULL"
  },
  "52f5cc540e8fc84b86957397d59684b8049ed1342f4050e7d9a7a9f2553ba4cf": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Varchar",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "keychainkind"
            }
          },
          "Varchar"
        ]
      }
    },
    "query": "INSERT INTO bria_addresses\n               (id, account_id, wallet_id, keychain_id, profile_id, address, kind, external_id)\n               VALUES ($1, $2, $3, $4, $5, $6, $7, $8)"
  },
  "55ca43169585550b32c40d2136f479bc62922fc3d77e2473ba7232fad46f491a": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_id",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "payout_queue_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "batch_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "profile_id",
          "ordinal": 5,
          "type_info": "Uuid"
        },
        {
          "name": "external_id",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 8,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 9,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        true,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_payouts b\n              JOIN bria_payout_events e ON b.id = e.id\n              WHERE b.batch_id IS NULL AND b.account_id = $1 AND b.payout_queue_id = $2\n              ORDER BY b.created_at, b.id, e.sequence FOR UPDATE"
  },
  "5dbd5de5f1ac830c6c8dd3dfb328ec469894930d36804207d6942f134da58ab2": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Varchar"
        ]
      }
    },
    "query": "INSERT INTO bria_profiles (id, account_id, name)\n            VALUES ($1, $2, $3)\n            RETURNING (id)"
  },
  "5df3e700d6abe2e53d1f282e4e29b808c5810b493044a8097e20fcd9de0f17d1": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "batch_id",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "xpub_fingerprint",
          "ordinal": 3,
          "type_info": "Bytea"
        },
        {
          "name": "sequence",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "event_type",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "event",
          "ordinal": 6,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event_type, e.event\n              FROM bria_signing_sessions b\n              JOIN bria_signing_session_events e ON b.id = e.id\n              WHERE account_id = $1 AND batch_id = $2\n              ORDER BY b.id, sequence"
  },
  "62bb247f2b5b0ca51016c14a12e3a89755b2de5db30e3051d482f2ab016b6fc9": {
    "describe": {
      "columns": [
        {
          "name": "income_detected_ledger_tx_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "tx_id",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "vout",
          "ordinal": 2,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "SELECT income_detected_ledger_tx_id, tx_id, vout FROM bria_utxos WHERE spending_batch_id = $1 AND wallet_id = $2"
  },
  "64e1397e479b21af86d7c24f14bd3004685915c5f1f2f166a78ffd437d1808f8": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_id",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "payout_queue_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "batch_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "profile_id",
          "ordinal": 5,
          "type_info": "Uuid"
        },
        {
          "name": "external_id",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 8,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 9,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        true,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_payouts b\n              JOIN bria_payout_events e ON b.id = e.id\n              WHERE b.account_id = $1 AND b.batch_id = $2\n              ORDER BY b.created_at, b.id, e.sequence"
  },
  "667c94ea72926ba7b05c7d785e1c9124b57fa2e15969f7df898657b1d075587a": {
    "describe": {
      "columns": [
        {
          "name": "address_idx",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "value",
          "ordinal": 1,
          "type_info": "Numeric"
        },
        {
          "name": "address",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "income_detected_ledger_tx_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "spend_detected_ledger_tx_id",
          "ordinal": 4,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Bool",
          "Int4",
          "Uuid",
          "Uuid",
          "Text",
          "Int4"
        ]
      }
    },
    "query": "UPDATE bria_utxos\n            SET bdk_spent = $1,\n                block_height = $2,\n                income_settled_ledger_tx_id = $3,\n                modified_at = NOW()\n            WHERE keychain_id = $4\n              AND tx_id = $5\n              AND vout = $6\n            RETURNING address_idx, value, address, income_detected_ledger_tx_id, spend_detected_ledger_tx_id"
  },
  "685fc5567c7787a765db331506310c85560d9bd07edab7abb95738adcd45e369": {
    "describe": {
      "columns": [
        {
          "name": "average_payouts_per_batch!",
          "ordinal": 0,
          "type_info": "Numeric"
        },
        {
          "name": "average_payout_value!",
          "ordinal": 1,
          "type_info": "Numeric"
        }
      ],
      "nullable": [
        null,
        null
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "\n            SELECT \n                COALESCE(ROUND(AVG(counts)), 0) AS \"average_payouts_per_batch!\",\n                COALESCE(ROUND(AVG(satoshis)), 0) AS \"average_payout_value!\"\n            FROM (\n                SELECT \n                    bria_payouts.batch_id,\n                    COUNT(*) AS counts,\n                    AVG((event->>'satoshis')::NUMERIC) AS satoshis\n                FROM bria_payouts\n                JOIN bria_payout_events ON bria_payouts.id = bria_payout_events.id\n                WHERE bria_payouts.wallet_id = $1 AND bria_payouts.payout_queue_id = $2 AND bria_payout_events.event_type = 'initialized'\n                GROUP BY bria_payouts.batch_id\n            ) as subquery\n            "
  },
  "6c752d8fc85a3062ed39cbbed6e7d9729de1727487bd8e71e0e00ffcf1f4db1b": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 3,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 5,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_payout_queues b\n              JOIN bria_payout_queue_events e ON b.id = e.id\n              WHERE account_id = $1\n              ORDER BY b.id, e.sequence"
  },
  "7296151c0d2387a0894ec37e082664d7d63ef81e673db3dfaa7a882c34ba8d25": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Varchar",
          "Bytea"
        ]
      }
    },
    "query": "INSERT INTO bria_xpubs\n            (id, account_id, name, fingerprint)\n            VALUES ($1, $2, $3, $4)"
  },
  "747102dbe477b86627debbdddb9f30884dcb2e8bf06603f4a96240b364fb4b9f": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "fingerprint",
          "ordinal": 3,
          "type_info": "Bytea"
        },
        {
          "name": "created_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 5,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 6,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT b.*, e.sequence, e.event\n            FROM bria_xpubs b\n            JOIN bria_xpub_events e ON b.id = e.id\n            WHERE account_id = $1\n            ORDER BY b.id, e.sequence"
  },
  "7485e1380cc765f5da9bb1c7571b277a8aeba5c40baadf9a62cb9287d267331a": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "UPDATE bdk_transactions SET confirmation_synced_to_bria = true, modified_at = NOW()\n            WHERE keychain_id = $1 AND tx_id = $2"
  },
  "7498e55695834401b62883d8ba476d275dc266ab61d6c39ed88eccfc39e3ceef": {
    "describe": {
      "columns": [
        {
          "name": "utxo_json",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT utxo_json FROM bdk_utxos WHERE keychain_id = $1 AND deleted_at IS NULL"
  },
  "75621ca434e9c583f743225f582e376e719dbb4810462b9092ecfef5c676fdd3": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Varchar"
        ]
      }
    },
    "query": "INSERT INTO bria_accounts (id, name, journal_id)\n            VALUES ($1, $2, $1)\n            RETURNING (id)"
  },
  "79eff690e77e488dccc3c066b265e7718128987e44d97f408059cca30fc5124c": {
    "describe": {
      "columns": [
        {
          "name": "script",
          "ordinal": 0,
          "type_info": "Bytea"
        },
        {
          "name": "keychain_kind: BdkKeychainKind",
          "ordinal": 1,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          }
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT script, keychain_kind as \"keychain_kind: BdkKeychainKind\" FROM bdk_script_pubkeys\n            WHERE keychain_id = $1"
  },
  "7b1d062ab3ccd35c471f9d59b4e475d4a42397782c3eaa9a35ac02ee30d85ac7": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "UPDATE bdk_transactions SET synced_to_bria = true, modified_at = NOW()\n            WHERE keychain_id = $1 AND tx_id = $2"
  },
  "7bc0ab72b1fe05b1f06d1df8af1b4a2db342927ea97f19a44c145f24a44012a3": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Interval",
          "Uuid"
        ]
      }
    },
    "query": "UPDATE mq_msgs SET retry_backoff = $1 WHERE id = $2"
  },
  "7c0ecd129f976df38b788e7e89b54d10632d96210d4dd59e4eeba1fd71117348": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "sequence",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 2,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "\n              SELECT b.id, e.sequence, e.event\n              FROM bria_addresses b\n              JOIN bria_address_events e ON b.id = e.id\n              WHERE account_id = $1 AND external_id = $2\n              ORDER BY b.created_at, b.id, sequence"
  },
  "7fa7527d14ec11108b66547a2fb677756b8ec3ba369c9d196999420ee8a2372c": {
    "describe": {
      "columns": [
        {
          "name": "utxo_json",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Int4"
        ]
      }
    },
    "query": "UPDATE bdk_utxos SET deleted_at = NOW()\n                 WHERE keychain_id = $1 AND tx_id = $2 AND vout = $3\n                 RETURNING utxo_json"
  },
  "83ce7790000ed6abed021305761008d0d5423d191aab8e911e10c99da41458e1": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Uuid",
          "Int8",
          "Bytea",
          "Bytea"
        ]
      }
    },
    "query": "INSERT INTO bria_batches (id, account_id, payout_queue_id, total_fee_sats, bitcoin_tx_id, unsigned_psbt)\n            VALUES ($1, $2, $3, $4, $5, $6)"
  },
  "8457bdb0419366f289fb8c02d6c89a68b26af13f5bf87ee838647e3d887a074d": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 3,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 5,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_wallets b\n              JOIN bria_wallet_events e ON b.id = e.id\n              WHERE b.id = ANY($1)\n              ORDER BY b.id, e.sequence"
  },
  "8b1d87e9c8410e2effb5a49472f7c60d188a00edd5afdc4e679962b85f25465a": {
    "describe": {
      "columns": [
        {
          "name": "index",
          "ordinal": 0,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          }
        ]
      }
    },
    "query": "SELECT index FROM bdk_indexes WHERE keychain_id = $1 AND keychain_kind = $2"
  },
  "8dba7efce7de6cbe27b17bae89eff8625492bbe3ce21e7aa12c1c4bbd43cc5e3": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "sequence",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 2,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "\n              SELECT b.id, e.sequence, e.event\n              FROM bria_addresses b\n              JOIN bria_address_events e ON b.id = e.id\n              WHERE account_id = $1 AND address = $2\n              ORDER BY b.created_at, b.id, sequence"
  },
  "8ddc2ea9bc99f7b4b1c004147c0f651ae0346f631b2393d5f4e45f9f18c5e20c": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_id",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "payout_queue_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "batch_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "profile_id",
          "ordinal": 5,
          "type_info": "Uuid"
        },
        {
          "name": "external_id",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 8,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 9,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        true,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "\n          SELECT b.*, e.sequence, e.event\n          FROM bria_payouts b\n          JOIN bria_payout_events e ON b.id = e.id\n          WHERE account_id = $1 AND b.external_id = $2\n          ORDER BY b.created_at, b.id, e.sequence"
  },
  "92405eb1906f643a2fee07533f746ad9fbb376713c8178aee4a31074949901fe": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Int4",
          "Int4"
        ]
      }
    },
    "query": "INSERT INTO bdk_sync_times (keychain_id, height, timestamp)\n            VALUES ($1, $2, $3)\n            ON CONFLICT (keychain_id) DO UPDATE SET height = EXCLUDED.height, timestamp = EXCLUDED.timestamp, modified_at = NOW()"
  },
  "9cb36a2e6028a11109348df8df5f188024576209d8a13e5c85d32a8172418ac1": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "sequence: EventSequence",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "ledger_event_id: SqlxLedgerEventId",
          "ordinal": 3,
          "type_info": "Int8"
        },
        {
          "name": "ledger_tx_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "payload",
          "ordinal": 5,
          "type_info": "Jsonb"
        },
        {
          "name": "recorded_at",
          "ordinal": 6,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        true,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n            SELECT id, account_id, sequence AS \"sequence: EventSequence\", ledger_event_id AS \"ledger_event_id: SqlxLedgerEventId\", ledger_tx_id, payload, recorded_at\n            FROM bria_outbox_events\n            WHERE account_id = $1 AND sequence > $2\n            ORDER BY sequence ASC\n            LIMIT $3\n            "
  },
  "a4f80cfdd4472ffc74a315fb9262ac73205efffa8a12e57753d6ae48ad097c41": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Bytea"
        ]
      }
    },
    "query": "SELECT id FROM bria_xpubs WHERE account_id = $1 AND fingerprint = $2"
  },
  "a911966fef9a58ef416c1ff0fe08ce385060b2c2e41843bf3d1959e8b33bfbb3": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Bytea",
          "Uuid"
        ]
      }
    },
    "query": "UPDATE bria_batches SET signed_tx = $1 WHERE id = $2"
  },
  "aa9649c7ffc17f8ae6e138521ad77e16607d146916f515d97f3ef3794fc7dd68": {
    "describe": {
      "columns": [
        {
          "name": "tx_id",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "utxo_json",
          "ordinal": 1,
          "type_info": "Jsonb"
        },
        {
          "name": "details_json",
          "ordinal": 2,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Int4"
        ]
      }
    },
    "query": "WITH updated_utxo AS (\n            UPDATE bdk_utxos SET confirmation_synced_to_bria = true, modified_at = NOW()\n            WHERE keychain_id = $1 AND (tx_id, vout) IN (\n                SELECT u.tx_id, vout\n                FROM bdk_utxos u\n                JOIN bdk_transactions t\n                ON u.keychain_id = t.keychain_id AND u.tx_id = t.tx_id\n                WHERE u.keychain_id = $1\n                AND u.deleted_at IS NULL\n                AND t.deleted_at IS NULL\n                AND utxo_json->>'keychain' = 'External'\n                AND u.synced_to_bria = true\n                AND u.confirmation_synced_to_bria = false\n                AND (details_json->'confirmation_time'->'height')::INTEGER <= $2\n                ORDER BY t.height ASC NULLS LAST\n                LIMIT 1\n            )\n            RETURNING tx_id, utxo_json\n            )\n            SELECT u.tx_id, utxo_json, details_json\n            FROM updated_utxo u JOIN bdk_transactions t on u.tx_id = t.tx_id"
  },
  "ae035b5eb3f913a9c784bf45223b2fcf72d4568f016759a98d0fb7d519f0d6ee": {
    "describe": {
      "columns": [
        {
          "name": "tx_id",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "details_json",
          "ordinal": 1,
          "type_info": "Jsonb"
        },
        {
          "name": "utxo_json",
          "ordinal": 2,
          "type_info": "Jsonb"
        },
        {
          "name": "vout",
          "ordinal": 3,
          "type_info": "Int4"
        },
        {
          "name": "is_tx_output!",
          "ordinal": 4,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        null
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Int4"
        ]
      }
    },
    "query": "\n            WITH tx_to_sync AS (\n              UPDATE bdk_transactions SET confirmation_synced_to_bria = true, modified_at = NOW()\n              WHERE keychain_id = $1 AND tx_id IN (\n                SELECT tx_id\n                FROM bdk_transactions\n                WHERE keychain_id = $1\n                AND deleted_at IS NULL\n                AND sent > 0\n                AND height IS NOT NULL\n                AND height <= $2\n                AND synced_to_bria = true\n                AND confirmation_synced_to_bria = false\n                ORDER BY height ASC\n                LIMIT 1)\n                RETURNING tx_id, details_json\n            ),\n            previous_outputs AS (\n                SELECT (jsonb_array_elements(details_json->'transaction'->'input')->>'previous_output') AS output\n                FROM tx_to_sync\n            )\n            SELECT t.tx_id, details_json, utxo_json, vout,\n                   CASE WHEN u.tx_id = t.tx_id THEN true ELSE false END AS \"is_tx_output!\"\n            FROM bdk_utxos u\n            JOIN tx_to_sync t ON u.tx_id = t.tx_id OR CONCAT(u.tx_id, ':', u.vout::text) = ANY(\n                SELECT output FROM previous_outputs\n            ) OR u.tx_id = t.tx_id\n            WHERE u.keychain_id = $1 AND u.deleted_at IS NULL AND (u.confirmation_synced_to_bria = false OR u.tx_id != t.tx_id)\n        "
  },
  "b4ff1533cd12d644b6959e11e7594e2d04a10913c7b49eae397ad41b3f918b5c": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Bytea",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          },
          "Uuid"
        ]
      }
    },
    "query": "INSERT INTO bdk_descriptor_checksums (script_bytes, keychain_kind, keychain_id)\n            VALUES ($1, $2, $3)"
  },
  "bac453e06ae1ceebef3012cf0119ec13fcc982c544b3fde38f557b264dea6e9a": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_id",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "payout_queue_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "batch_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "profile_id",
          "ordinal": 5,
          "type_info": "Uuid"
        },
        {
          "name": "external_id",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 8,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 9,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        true,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "\n          SELECT b.*, e.sequence, e.event\n          FROM bria_payouts b\n          JOIN bria_payout_events e ON b.id = e.id\n          WHERE account_id = $1 AND b.id = $2\n          ORDER BY b.created_at, b.id, e.sequence"
  },
  "c10c892b9997213a39501192937233ec95053c1a7598736e00c2525cd7e2e030": {
    "describe": {
      "columns": [
        {
          "name": "details_json",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "UPDATE bdk_transactions\n                 SET deleted_at = NOW()\n                 WHERE keychain_id = $1 AND tx_id = $2\n                 RETURNING details_json"
  },
  "ccbffcf0dc4fec403b76afecafd708decb30f8c3124db79f2444a18754fe77a3": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 3,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 5,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_wallets b\n              JOIN bria_wallet_events e ON b.id = e.id\n              WHERE account_id = $1\n              ORDER BY e.sequence"
  },
  "ce7720223d3043460b6c5ad4ed599d0b67ed6d22437408dc8fd90705f3fc4131": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "UPDATE bria_batch_wallet_summaries\n               SET batch_created_ledger_tx_id = $1\n               WHERE wallet_id = $2 AND batch_id = $3 AND batch_created_ledger_tx_id IS NULL"
  },
  "d1049af6349b0b47e85d0d5ae79292f7d1c4678b585365d7427a6820b6b61708": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          },
          "Int4"
        ]
      }
    },
    "query": "INSERT INTO bdk_indexes (keychain_id, keychain_kind, index)\n               VALUES ($1, $2, $3)\n               ON CONFLICT (keychain_id, keychain_kind)\n               DO UPDATE SET index = $3, modified_at = NOW()\n               WHERE bdk_indexes.index < $3 AND bdk_indexes.keychain_id = $1 AND bdk_indexes.keychain_kind = $2"
  },
  "d3fac1b5ed276a99fdd626ccefb4e6b23af393503545c1654e150b0e23bb6c70": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Text",
          "Uuid"
        ]
      }
    },
    "query": "INSERT INTO bria_profile_api_keys (encrypted_key, profile_id)\n            VALUES (crypt($1, gen_salt('bf')), (SELECT id FROM bria_profiles WHERE id = $2)) RETURNING (id)"
  },
  "dd54648319f50f64de6bd020d2a42b42b19dd132b654bdbdce3d93dbf86384f9": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT id, name FROM bria_profiles WHERE account_id = $1"
  },
  "e1dfebd338910bea5b6c89fc03acc042b3a380bb12de33426383279d51e5a902": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "SELECT id, name FROM bria_profiles WHERE account_id = $1 AND name = $2"
  },
  "e31e3eb7bcecededcab9a4ffb65bc901ba008955620597daf9e952a091ad20c3": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Varchar",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO bria_admin_api_keys (name, encrypted_key)\n            VALUES ($1, crypt($2, gen_salt('bf'))) RETURNING (id)"
  },
  "e6b22adbdcceb4afb26aeceb299fbb32d97989aa7d87ab7f529d2393c36e4f74": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 3,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 5,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_payout_queues b\n              JOIN bria_payout_queue_events e ON b.id = e.id\n              WHERE account_id = $1 AND b.id = $2\n              ORDER BY e.sequence"
  },
  "e9b1d1648ca75ee2bede0753abbf6d7f16a2537d968f46da9fb416e4ca403e4e": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT p.id, p.account_id, p.name\n               FROM bria_profiles p\n               JOIN bria_profile_api_keys k ON k.profile_id = p.id\n               WHERE k.active = true AND k.encrypted_key = crypt($1, encrypted_key)"
  },
  "eaffb64f1a72a99a5057d0b0bdb083c49c1abb909e19e6cd0bc898017f516170": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "cypher",
          "ordinal": 1,
          "type_info": "Bytea"
        },
        {
          "name": "nonce",
          "ordinal": 2,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      }
    },
    "query": "\n            SELECT id, cypher, nonce\n            FROM bria_xpub_signer_configs\n            WHERE id = ANY($1)\n            "
  },
  "eb52716de47fe5a66c500d1bcd11bbb76b1d897bce46674bf97fc5e11c1133d9": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 3,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 4,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 5,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_payout_queues b\n              JOIN bria_payout_queue_events e ON b.id = e.id\n              WHERE account_id = $1 AND name = $2\n              ORDER BY e.sequence"
  },
  "ef8b83a66cdeb4d36d14308de0253cd462c04e43f9a97910d0c44362dacc3d77": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_id",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "payout_queue_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "batch_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "profile_id",
          "ordinal": 5,
          "type_info": "Uuid"
        },
        {
          "name": "external_id",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "created_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        },
        {
          "name": "sequence",
          "ordinal": 8,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 9,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        true,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "\n              SELECT b.*, e.sequence, e.event\n              FROM bria_payouts b\n              JOIN bria_payout_events e ON b.id = e.id\n              WHERE b.account_id = $1 AND b.wallet_id = $2\n              ORDER BY b.created_at, b.id, e.sequence FOR UPDATE"
  },
  "efdd550e82e6bdfd1e6793a25106d1a29e17cacae16b0d3e3350dbe8338a16c5": {
    "describe": {
      "columns": [
        {
          "name": "wallet_id: WalletId",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        null
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Uuid",
          "Varchar",
          "Varchar",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "keychainkind"
            }
          }
        ]
      }
    },
    "query": "WITH ins AS (\n                   INSERT INTO bria_descriptors (id, account_id, wallet_id, descriptor, checksum, kind)\n                   VALUES ($1, $2, $3, $4, $5, $6)\n                   ON CONFLICT (account_id, checksum) DO NOTHING\n                   RETURNING wallet_id\n               )\n               SELECT wallet_id AS \"wallet_id: WalletId\" FROM ins\n               UNION ALL\n               SELECT wallet_id FROM bria_descriptors\n               WHERE account_id = $2 AND checksum = $5\n               LIMIT 1;\n               "
  },
  "f3e40cb1852fdfd9f7c3fd89e27760574d526b4746ff7d90677b1938bc2278bc": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT id, name FROM bria_admin_api_keys WHERE encrypted_key = crypt($1, encrypted_key)"
  },
  "f4c6df4bfca4287add9b9f19df9d2555cc6a3917021892dd7a32652d0fa3637d": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "sequence",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "event",
          "ordinal": 2,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "\n              SELECT b.id, e.sequence, e.event\n              FROM bria_addresses b\n              JOIN bria_address_events e ON b.id = e.id\n              WHERE account_id = $1 AND wallet_id = $2 AND kind = 'external'\n              ORDER BY b.created_at, b.id, sequence"
  },
  "f6273d55a9ef0ab5746064b4064346c2789b6db97251e49d99d82d5e49dfd174": {
    "describe": {
      "columns": [
        {
          "name": "height",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "timestamp",
          "ordinal": 1,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT height, timestamp FROM bdk_sync_times WHERE keychain_id = $1"
  },
  "f786f29a9de1c9f15a64fc7d541156184e9353f286c111aa90e74e1b950da39f": {
    "describe": {
      "columns": [
        {
          "name": "script",
          "ordinal": 0,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          },
          "Int4"
        ]
      }
    },
    "query": "SELECT script FROM bdk_script_pubkeys\n            WHERE keychain_id = $1 AND keychain_kind = $2 AND path = $3"
  },
  "f7df099ce3c2628910cef4b4d5445610313be8ece43f5f530d8e0e2322a62cf4": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Varchar"
        ]
      }
    },
    "query": "INSERT INTO bria_payouts (id, account_id, wallet_id, payout_queue_id, profile_id, external_id)\n               VALUES ($1, $2, $3, $4, $5, $6)"
  },
  "fa20681958de2a9b7764665edde5dbc0f5f839a0ea33b48dfdc2214966dd8efa": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Varchar"
        ]
      }
    },
    "query": "\n            INSERT INTO bria_payout_queues (id, account_id, name)\n            VALUES ($1, $2, $3)\n            "
  },
  "fe8db368224378dc4e3d14fbcca09a443c19c41e38b9a5c2c3866f48e00e798e": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "ledger_id?",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "batch_created_ledger_tx_id",
          "ordinal": 2,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false,
        true,
        true
      ],
      "parameters": {
        "Left": [
          "Bytea",
          "Uuid"
        ]
      }
    },
    "query": "WITH b AS (\n                 SELECT id FROM bria_batches\n                 WHERE bitcoin_tx_id = $1\n               )\n               SELECT b.id, s.batch_broadcast_ledger_tx_id as \"ledger_id?\", s.batch_created_ledger_tx_id\n               FROM b\n               LEFT JOIN (\n                   SELECT batch_id, batch_broadcast_ledger_tx_id, batch_created_ledger_tx_id\n                   FROM bria_batch_wallet_summaries\n                   WHERE wallet_id = $2 AND batch_id = ANY(SELECT id FROM b)\n                   FOR UPDATE\n               ) s\n               ON b.id = s.batch_id"
  }
}