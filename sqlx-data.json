{
  "db": "PostgreSQL",
  "109ea3d7d47bb66e66fe45454c40a02414f45d7f806b247ef6ed5c09791d1cbb": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_cfg",
          "ordinal": 1,
          "type_info": "Jsonb"
        },
        {
          "name": "incoming_ledger_account_id",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "at_rest_ledger_account_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "fee_ledger_account_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "outgoing_ledger_account_id",
          "ordinal": 5,
          "type_info": "Uuid"
        },
        {
          "name": "dust_ledger_account_id",
          "ordinal": 6,
          "type_info": "Uuid"
        },
        {
          "name": "journal_id",
          "ordinal": 7,
          "type_info": "Uuid"
        },
        {
          "name": "keychain_id",
          "ordinal": 8,
          "type_info": "Uuid"
        },
        {
          "name": "keychain_cfg",
          "ordinal": 9,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      }
    },
    "query": "WITH latest AS (\n              SELECT w.id, w.wallet_cfg, w.incoming_ledger_account_id, w.at_rest_ledger_account_id, w.fee_ledger_account_id, w.outgoing_ledger_account_id, w.dust_ledger_account_id, a.journal_id\n              FROM bria_wallets w JOIN bria_accounts a ON w.account_id = a.id\n              WHERE w.id = ANY($1) ORDER BY version DESC LIMIT 1\n            )\n            SELECT l.id, l.wallet_cfg, l.incoming_ledger_account_id, l.at_rest_ledger_account_id, l.fee_ledger_account_id, l.outgoing_ledger_account_id, l.dust_ledger_account_id, l.journal_id, k.id AS keychain_id, keychain_cfg\n                 FROM bria_wallet_keychains k\n                 JOIN latest l ON k.wallet_id = l.id\n                 ORDER BY sequence DESC"
  },
  "115999f874d3397311d1ebc501e47eef0a01993a7f573873b6d0a5d87cbb0866": {
    "describe": {
      "columns": [
        {
          "name": "index",
          "ordinal": 0,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          }
        ]
      }
    },
    "query": "SELECT index FROM bdk_indexes\n          WHERE keychain_id = $1 AND keychain_kind = $2 ORDER BY index DESC LIMIT 1"
  },
  "1e5a38689d22733b68e1e66320a8cdbdc5d6d692e44e72c735bafe657e7ddf1f": {
    "describe": {
      "columns": [
        {
          "name": "name",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "derivation_path",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "original",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "xpub",
          "ordinal": 3,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Bytea"
        ]
      }
    },
    "query": "SELECT name, derivation_path, original, xpub FROM bria_xpubs WHERE account_id = $1 AND xpub = $2"
  },
  "2fa457a8cb724012819382713463f08be00258a86067984914abe8ebee3d38fa": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT distinct(id) FROM bria_wallets"
  },
  "316920ab6db6dd6b3aa325b40c6908d1e166792781dde5289f0d26113bb76428": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "destination_data",
          "ordinal": 2,
          "type_info": "Jsonb"
        },
        {
          "name": "satoshis",
          "ordinal": 3,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "WITH latest AS (\n                 SELECT DISTINCT(id), MAX(version) OVER (PARTITION BY id ORDER BY version DESC)\n                 FROM bria_payouts LEFT JOIN bria_batch_payouts ON id = payout_id\n                 WHERE batch_group_id = $1 AND payout_id IS NULL\n               ) SELECT id, wallet_id, destination_data, satoshis FROM bria_payouts\n                 WHERE (id, version) IN (SELECT * FROM latest)\n                 ORDER BY priority, created_at"
  },
  "318f82b3188e528f94254ecea21adae1cd19d9af02599f538234a0811089853f": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Varchar",
          "Jsonb"
        ]
      }
    },
    "query": "\n        INSERT INTO bdk_transactions (keychain_id, tx_id, details_json)\n        VALUES ($1, $2, $3) ON CONFLICT (keychain_id, tx_id)\n        DO UPDATE SET details_json = EXCLUDED.details_json"
  },
  "319ee8ffea91d73d47e75321fdfd1e4fee4534344636e2948ee1b82f9ac3edfa": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          },
          "Int4",
          "Bytea",
          "Varchar"
        ]
      }
    },
    "query": "INSERT INTO bdk_script_pubkeys\n            (keychain_id, keychain_kind, path, script, script_fmt)\n            VALUES ($1, $2, $3, $4, $5) ON CONFLICT DO NOTHING"
  },
  "323bf243d28db3a7f6810a2e640a8339e41793a7982e9ed6dc7175570f1d921d": {
    "describe": {
      "columns": [
        {
          "name": "script_bytes",
          "ordinal": 0,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          }
        ]
      }
    },
    "query": "SELECT script_bytes\n            FROM bdk_descriptor_checksums WHERE keychain_id = $1 AND keychain_kind = $2"
  },
  "46b5eee37f84d1274f4d22a0ee26d4399fe629ea70f25d5974a4859fee6cd0fe": {
    "describe": {
      "columns": [
        {
          "name": "utxo_json",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT utxo_json FROM bdk_utxos WHERE keychain_id = $1"
  },
  "4765468ce85318bb81f26d14951f01b674a39f34c13ab0c996bf132978680dcf": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Jsonb"
        ]
      }
    },
    "query": "INSERT INTO bria_wallet_keychains (account_id, wallet_id, keychain_cfg)\n            VALUES ($1, $2, $3)"
  },
  "4a39d07c30385438386e90c255154d7a9edc8f2cf6789044e2a08976b8a87629": {
    "describe": {
      "columns": [
        {
          "name": "name",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "derivation_path",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "original",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "xpub",
          "ordinal": 3,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "SELECT name, derivation_path, original, xpub FROM bria_xpubs WHERE account_id = $1 AND name = $2"
  },
  "4a7edc3efda3a45415a9eccd8c1ff7656ae63c074086843e43c325661b3fb516": {
    "describe": {
      "columns": [
        {
          "name": "keychain_kind: BdkKeychainKind",
          "ordinal": 0,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          }
        },
        {
          "name": "path",
          "ordinal": 1,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Bytea"
        ]
      }
    },
    "query": "SELECT keychain_kind as \"keychain_kind: BdkKeychainKind\", path FROM bdk_script_pubkeys\n            WHERE keychain_id = $1 AND script = $2"
  },
  "6be0e1f0b1e056688e4e276b13a40d5b6423b960df7dbff0b2a2f5e1bec3dc33": {
    "describe": {
      "columns": [
        {
          "name": "name",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "derivation_path",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "original",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "xpub",
          "ordinal": 3,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Bytea"
        ]
      }
    },
    "query": "SELECT name, derivation_path, original, xpub FROM bria_xpubs WHERE account_id = $1 AND fingerprint = $2"
  },
  "73a00973e7edde6b076ab47e4252ede62c22d65acce920110dc1497a5997025e": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Varchar",
          "Text",
          "Uuid"
        ]
      }
    },
    "query": "INSERT INTO bria_account_api_keys (name, encrypted_key, account_id)\n            VALUES ($1, crypt($2, gen_salt('bf')), (SELECT id FROM bria_accounts WHERE id = $3)) RETURNING (id)"
  },
  "73e658dc30bd137f4aa6b118aa8919ff6b9d5cfd9a63dd147d7cc2e2a71bd182": {
    "describe": {
      "columns": [
        {
          "name": "details_json",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n        SELECT details_json FROM bdk_transactions WHERE keychain_id = $1"
  },
  "75621ca434e9c583f743225f582e376e719dbb4810462b9092ecfef5c676fdd3": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Varchar"
        ]
      }
    },
    "query": "INSERT INTO bria_accounts (id, name, journal_id)\n            VALUES ($1, $2, $1)\n            RETURNING (id)"
  },
  "79eff690e77e488dccc3c066b265e7718128987e44d97f408059cca30fc5124c": {
    "describe": {
      "columns": [
        {
          "name": "script",
          "ordinal": 0,
          "type_info": "Bytea"
        },
        {
          "name": "keychain_kind: BdkKeychainKind",
          "ordinal": 1,
          "type_info": {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          }
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT script, keychain_kind as \"keychain_kind: BdkKeychainKind\" FROM bdk_script_pubkeys\n            WHERE keychain_id = $1"
  },
  "7d7af417c1ef479000d3a7cfc4e481d4c1724e92df0a4a2a3d7e04387c80ab47": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "batch_cfg",
          "ordinal": 3,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT id, account_id, name, batch_cfg\n                 FROM bria_batch_groups\n                 WHERE id = $1 ORDER BY version DESC LIMIT 1"
  },
  "7e1181e6923f653373aa5268bfcbaaef39828ea646ef1379912a6aa20a34b816": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Jsonb",
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Varchar"
        ]
      }
    },
    "query": "INSERT INTO bria_wallets (id, wallet_cfg, account_id, incoming_ledger_account_id, at_rest_ledger_account_id, fee_ledger_account_id, outgoing_ledger_account_id, dust_ledger_account_id, name)\n            VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n            RETURNING (id)"
  },
  "7ffd870c69bda78f7d81488e6f10e9e06be55fe817f433644fd07566148b20ff": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Text",
          "Jsonb"
        ]
      }
    },
    "query": "\n            INSERT INTO bria_xpub_signers (id, account_id, xpub_name, signer_cfg)\n            VALUES ($1, $2, (SELECT name FROM bria_xpubs WHERE account_id = $2 AND name = $3), $4)\n            "
  },
  "92405eb1906f643a2fee07533f746ad9fbb376713c8178aee4a31074949901fe": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Int4",
          "Int4"
        ]
      }
    },
    "query": "INSERT INTO bdk_sync_times (keychain_id, height, timestamp)\n            VALUES ($1, $2, $3)\n            ON CONFLICT (keychain_id) DO UPDATE SET height = EXCLUDED.height, timestamp = EXCLUDED.timestamp, modified_at = NOW()"
  },
  "9e38db9fbc99cd77dd9df1ac60513d37e2c31bef5876113dff5842f3daa9c308": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Int8",
          "Bytea",
          "Bytea"
        ]
      }
    },
    "query": "INSERT INTO bria_batches (id, batch_group_id, total_fee_sats, bitcoin_tx_id, unsigned_psbt)\n            VALUES ($1, $2, $3, $4, $5)"
  },
  "a17c30ab0f4af264c0239ee4f9aee7dbc3d1c90901d0a21c6682131ba5a7742e": {
    "describe": {
      "columns": [
        {
          "name": "details_json",
          "ordinal": 0,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "\n        SELECT details_json FROM bdk_transactions WHERE keychain_id = $1 AND tx_id = $2"
  },
  "a8eb9dddd47a58ae77b39f1e0a33a6c7007ff6a631c043dd03941efad2b313e1": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Varchar",
          "Varchar",
          "Bytea",
          "Varchar",
          "Bytea",
          "Bytea"
        ]
      }
    },
    "query": "INSERT INTO bria_xpubs\n            (account_id, name, original, xpub, derivation_path, fingerprint, parent_fingerprint)\n            VALUES ((SELECT id FROM bria_accounts WHERE id = $1), $2, $3, $4, $5, $6, $7)"
  },
  "ad78368dbc971b6a7b2862931c078c73eaf6b8859399a7f12cad771621eac290": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          },
          "Int4"
        ]
      }
    },
    "query": "INSERT INTO bdk_indexes (keychain_id, keychain_kind, index)\n                VALUES ($1, $2, $3) ON CONFLICT DO NOTHING"
  },
  "affee8ab9a8bc35b854fa93a674607dd86d27acb8ef8c9cd2dfb6a93394c26ae": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Uuid",
          "Uuid",
          "Int8",
          "Jsonb",
          "Varchar",
          "Jsonb"
        ]
      }
    },
    "query": "INSERT INTO bria_payouts (id, account_id, batch_group_id, wallet_id, satoshis, destination_data, external_id, metadata)\n               VALUES ($1, $2, $3, $4, $5, $6, $7, $8)"
  },
  "b3aa6d827a9e8f2681a14f272cb8d64ea23acbc135d03bbb5b45f6b9df133982": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Varchar",
          "Int4",
          "Jsonb"
        ]
      }
    },
    "query": "INSERT INTO bdk_utxos (keychain_id, tx_id, vout, utxo_json)\n            VALUES ($1, $2, $3, $4) ON CONFLICT (keychain_id, tx_id, vout)\n            DO UPDATE set utxo_json = EXCLUDED.utxo_json"
  },
  "b4ff1533cd12d644b6959e11e7594e2d04a10913c7b49eae397ad41b3f918b5c": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Bytea",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          },
          "Uuid"
        ]
      }
    },
    "query": "INSERT INTO bdk_descriptor_checksums (script_bytes, keychain_kind, keychain_id)\n            VALUES ($1, $2, $3)"
  },
  "b6c853c92a6311318359ba2eb72a51f68317473c9235469388f94226f3716f8d": {
    "describe": {
      "columns": [
        {
          "name": "keychain_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "utxo_json",
          "ordinal": 1,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      }
    },
    "query": "SELECT keychain_id, utxo_json\n                          FROM bdk_utxos\n                          WHERE keychain_id = ANY($1)\n                            AND (utxo_json->'is_spent')::BOOLEAN = false\n                            AND spending_batch_id IS NOT NULL FOR UPDATE"
  },
  "bba0456ebcbee4145b3954bd2f6147b0734202900a5ed8496e6f720dcd16601d": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT id, account_id, name FROM bria_account_api_keys WHERE encrypted_key = crypt($1, encrypted_key)"
  },
  "c90665cc4e945474a15ec6c83117819a234cf73ea6091ce61e44f31d5f02ea20": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_cfg",
          "ordinal": 1,
          "type_info": "Jsonb"
        },
        {
          "name": "incoming_ledger_account_id",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "at_rest_ledger_account_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "fee_ledger_account_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "outgoing_ledger_account_id",
          "ordinal": 5,
          "type_info": "Uuid"
        },
        {
          "name": "dust_ledger_account_id",
          "ordinal": 6,
          "type_info": "Uuid"
        },
        {
          "name": "journal_id",
          "ordinal": 7,
          "type_info": "Uuid"
        },
        {
          "name": "keychain_id",
          "ordinal": 8,
          "type_info": "Uuid"
        },
        {
          "name": "keychain_cfg",
          "ordinal": 9,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "WITH latest AS (\n              SELECT w.id, w.wallet_cfg, w.incoming_ledger_account_id, w.at_rest_ledger_account_id, w.fee_ledger_account_id, w.outgoing_ledger_account_id, w.dust_ledger_account_id, a.journal_id \n              FROM bria_wallets w JOIN bria_accounts a ON w.account_id = a.id\n              WHERE w.id = $1 ORDER BY version DESC LIMIT 1\n            )\n            SELECT l.id, l.wallet_cfg, l.incoming_ledger_account_id, l.at_rest_ledger_account_id, l.fee_ledger_account_id, l.outgoing_ledger_account_id, l.dust_ledger_account_id, l.journal_id, k.id AS keychain_id, keychain_cfg\n                 FROM bria_wallet_keychains k\n                 JOIN latest l ON k.wallet_id = l.id\n                 ORDER BY sequence DESC"
  },
  "cea08e173999feced38d8c3d7039b2d2ea3bf7a26f7df74d33da7b2c0b772117": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "account_id",
          "ordinal": 1,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "batch_cfg",
          "ordinal": 3,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "WITH latest AS (\n                 SELECT DISTINCT(id), MAX(version) OVER (PARTITION BY id ORDER BY version DESC)\n                 FROM bria_batch_groups\n               ) SELECT id, account_id, name, batch_cfg FROM bria_batch_groups\n                 WHERE (id, version) IN (SELECT * FROM latest)"
  },
  "d210e678bab9acd40b3773d7bdc33c6b8b71c6a742e53d0d4c407b1ae5bb2528": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "Varchar",
          "Varchar",
          "Jsonb"
        ]
      }
    },
    "query": "\n            INSERT INTO bria_batch_groups (id, account_id, name, description, batch_cfg)\n            VALUES ($1, $2, $3, $4, $5)\n            "
  },
  "d6e6c21ec2c30cf06458087fc805aa0274b75c51a8271efe50f3128605a1c44c": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "SELECT id\n                 FROM bria_batch_groups\n                 WHERE account_id = $1 AND name = $2 ORDER BY version DESC LIMIT 1"
  },
  "e2362a826e4a08190faa2f6529c3f255e4b81cd65c741318a33fbb49ddc27e38": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          },
          "Int4"
        ]
      }
    },
    "query": "INSERT INTO bdk_indexes (keychain_id, keychain_kind, index)\n                VALUES ($1, $2, $3)"
  },
  "e31e3eb7bcecededcab9a4ffb65bc901ba008955620597daf9e952a091ad20c3": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Varchar",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO bria_admin_api_keys (name, encrypted_key)\n            VALUES ($1, crypt($2, gen_salt('bf'))) RETURNING (id)"
  },
  "e492936568320726f5268c75db719fb599ae2a0cd1ed55dad48726e0c8f9dd3d": {
    "describe": {
      "columns": [
        {
          "name": "batch_id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Int4"
        ]
      }
    },
    "query": "SELECT batch_id\n            FROM bria_batch_utxos\n            WHERE keychain_id = $1 AND tx_id = $2 AND vout = $3"
  },
  "eacda676458f587eb8578f8982101d007d9d1a42e6b3146250176a63e5d238c6": {
    "describe": {
      "columns": [
        {
          "name": "tx_id",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "utxo_json",
          "ordinal": 1,
          "type_info": "Jsonb"
        },
        {
          "name": "details_json",
          "ordinal": 2,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": "WITH utxo AS (\n                 UPDATE bdk_utxos SET ledger_tx_pending_id = $1\n                 WHERE keychain_id = $2 AND (tx_id, vout) in (\n                   SELECT tx_id, vout FROM bdk_utxos\n                   WHERE keychain_id = $2 AND ledger_tx_pending_id IS NULL LIMIT 1)\n                 RETURNING tx_id, utxo_json\n                 )\n               SELECT u.tx_id, utxo_json, details_json\n                 FROM utxo u\n                 JOIN bdk_transactions t ON u.tx_id = t.tx_id"
  },
  "eaf56dbf08faba87951ef230864999ab193e8625d24e41ea7786e56d5fc0b06c": {
    "describe": {
      "columns": [
        {
          "name": "batch_group_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "unsigned_psbt",
          "ordinal": 1,
          "type_info": "Bytea"
        },
        {
          "name": "bitcoin_tx_id",
          "ordinal": 2,
          "type_info": "Bytea"
        },
        {
          "name": "batch_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "total_in_sats",
          "ordinal": 5,
          "type_info": "Int8"
        },
        {
          "name": "total_out_sats",
          "ordinal": 6,
          "type_info": "Int8"
        },
        {
          "name": "change_sats",
          "ordinal": 7,
          "type_info": "Int8"
        },
        {
          "name": "change_address",
          "ordinal": 8,
          "type_info": "Varchar"
        },
        {
          "name": "fee_sats",
          "ordinal": 9,
          "type_info": "Int8"
        },
        {
          "name": "ledger_tx_pending_id",
          "ordinal": 10,
          "type_info": "Uuid"
        },
        {
          "name": "ledger_tx_settled_id",
          "ordinal": 11,
          "type_info": "Uuid"
        },
        {
          "name": "tx_id",
          "ordinal": 12,
          "type_info": "Varchar"
        },
        {
          "name": "vout",
          "ordinal": 13,
          "type_info": "Int4"
        },
        {
          "name": "keychain_id",
          "ordinal": 14,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT batch_group_id, unsigned_psbt, bitcoin_tx_id, u.batch_id, s.wallet_id, total_in_sats, total_out_sats, change_sats, change_address, fee_sats, ledger_tx_pending_id, ledger_tx_settled_id, tx_id, vout, keychain_id\n            FROM bria_batch_utxos u\n            LEFT JOIN bria_batch_wallet_summaries s ON u.batch_id = s.batch_id AND u.wallet_id = s.wallet_id\n            LEFT JOIN bria_batches b ON b.id = u.batch_id\n            WHERE u.batch_id = $1"
  },
  "ee265d202f419acf4715b077c2591278ac9274fa6b667dd4bf2a0bf44a3dd7eb": {
    "describe": {
      "columns": [
        {
          "name": "tx_id",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "utxo_json",
          "ordinal": 1,
          "type_info": "Jsonb"
        },
        {
          "name": "ledger_tx_pending_id!",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "details_json",
          "ordinal": 3,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        true,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Uuid",
          "TextArray"
        ]
      }
    },
    "query": "WITH utxo AS (\n                 UPDATE bdk_utxos SET ledger_tx_settled_id = $1\n                 WHERE keychain_id = $2 AND (tx_id, vout) in (\n                   SELECT u.tx_id, vout\n                     FROM bdk_utxos u\n                     JOIN bdk_transactions t\n                       ON u.keychain_id = t.keychain_id\n                       AND u.tx_id = t.tx_id\n                   WHERE u.keychain_id = $2\n                   AND ledger_tx_settled_id IS NULL\n                   AND ledger_tx_pending_id IS NOT NULL\n                   AND (details_json->'confirmation_time'->'height')::INTEGER > 0\n                   AND NOT (u.tx_id || ':' || vout::TEXT = ANY($3))\n                   LIMIT 1)\n                 RETURNING tx_id, utxo_json, ledger_tx_pending_id\n               )\n               SELECT u.tx_id, utxo_json, ledger_tx_pending_id AS \"ledger_tx_pending_id!\", details_json\n               FROM utxo u JOIN bdk_transactions t on u.tx_id = t.tx_id"
  },
  "f3e40cb1852fdfd9f7c3fd89e27760574d526b4746ff7d90677b1938bc2278bc": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT id, name FROM bria_admin_api_keys WHERE encrypted_key = crypt($1, encrypted_key)"
  },
  "f6273d55a9ef0ab5746064b4064346c2789b6db97251e49d99d82d5e49dfd174": {
    "describe": {
      "columns": [
        {
          "name": "height",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "timestamp",
          "ordinal": 1,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT height, timestamp FROM bdk_sync_times WHERE keychain_id = $1"
  },
  "f786f29a9de1c9f15a64fc7d541156184e9353f286c111aa90e74e1b950da39f": {
    "describe": {
      "columns": [
        {
          "name": "script",
          "ordinal": 0,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          {
            "Custom": {
              "kind": {
                "Enum": [
                  "external",
                  "internal"
                ]
              },
              "name": "bdkkeychainkind"
            }
          },
          "Int4"
        ]
      }
    },
    "query": "SELECT script FROM bdk_script_pubkeys\n            WHERE keychain_id = $1 AND keychain_kind = $2 AND path = $3"
  },
  "feae5fb41a48e43f1729d52240a824eabdc3535b111a63126058bdca0049ed82": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "wallet_cfg",
          "ordinal": 1,
          "type_info": "Jsonb"
        },
        {
          "name": "incoming_ledger_account_id",
          "ordinal": 2,
          "type_info": "Uuid"
        },
        {
          "name": "at_rest_ledger_account_id",
          "ordinal": 3,
          "type_info": "Uuid"
        },
        {
          "name": "fee_ledger_account_id",
          "ordinal": 4,
          "type_info": "Uuid"
        },
        {
          "name": "outgoing_ledger_account_id",
          "ordinal": 5,
          "type_info": "Uuid"
        },
        {
          "name": "dust_ledger_account_id",
          "ordinal": 6,
          "type_info": "Uuid"
        },
        {
          "name": "journal_id",
          "ordinal": 7,
          "type_info": "Uuid"
        },
        {
          "name": "keychain_id",
          "ordinal": 8,
          "type_info": "Uuid"
        },
        {
          "name": "keychain_cfg",
          "ordinal": 9,
          "type_info": "Jsonb"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "WITH latest AS (\n              SELECT w.id, w.wallet_cfg, w.incoming_ledger_account_id, w.at_rest_ledger_account_id, w.fee_ledger_account_id, w.outgoing_ledger_account_id, w.dust_ledger_account_id, a.journal_id \n              FROM bria_wallets w JOIN bria_accounts a ON w.account_id = a.id\n              WHERE a.id = $1 AND w.name = $2 ORDER BY version DESC LIMIT 1\n            )\n            SELECT l.id, l.wallet_cfg, l.incoming_ledger_account_id, l.at_rest_ledger_account_id, l.fee_ledger_account_id, l.outgoing_ledger_account_id, l.dust_ledger_account_id, l.journal_id, k.id AS keychain_id, keychain_cfg\n                 FROM bria_wallet_keychains k\n                 JOIN latest l ON k.wallet_id = l.id\n                 ORDER BY sequence DESC"
  }
}